Liferay.Loader.define("portal-search-web@6.0.113/js/hooks/useDebounceCallback",["module","exports","require","frontend-js-web","liferay!frontend-js-react-web$react"],(function(e,r,n){window;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function useDebounceCallback(e,r){const n=(0,c.useRef)((0,o.debounce)(e,r));return[n.current,()=>(0,o.cancelDebounce)(n.current)]};var o=n("frontend-js-web"),c=n("liferay!frontend-js-react-web$react")}));

Liferay.Loader.define("portal-search-web@6.0.113/js/utils/parse_json_string",["module","exports","require"],(function(e,r,t){window;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function parseJSONString(e){if(void 0===e||""===e)return"";try{return JSON.parse(e)}catch(r){return e}}}));

Liferay.Loader.define("portal-search-web@6.0.113/js/utils/types/contributorTypes",["module","exports","require"],(function(e,_,S){window;{Object.defineProperty(_,"__esModule",{value:!0}),_.CONTRIBUTOR_TYPES_ASAH_DEFAULT_DISPLAY_GROUP_NAMES=_.CONTRIBUTOR_TYPES=void 0;const e={ASAH_RECENT_SEARCH_KEYWORDS:"asahRecentSearchKeywords",ASAH_TOP_SEARCH_KEYWORDS:"asahTopSearchKeywords",BASIC:"basic",SXP_BLUEPRINT:"sxpBlueprint"};_.CONTRIBUTOR_TYPES=e;const S={[e.ASAH_RECENT_SEARCH_KEYWORDS]:"trending-searches",[e.ASAH_TOP_SEARCH_KEYWORDS]:"top-searches"};_.CONTRIBUTOR_TYPES_ASAH_DEFAULT_DISPLAY_GROUP_NAMES=S}}));

Liferay.Loader.define("portal-search-web@6.0.113/js/utils/clean_suggestions_contributor_configuration",["module","exports","require","./parse_json_string","./types/contributorTypes"],(function(e,t,r){window;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function cleanSuggestionsContributorConfiguration(e,t,r=!1){return(0,o.default)(e).filter((e=>!(!r&&e.contributorName===n.CONTRIBUTOR_TYPES.SXP_BLUEPRINT)&&!!(t||e.contributorName!==n.CONTRIBUTOR_TYPES.SXP_BLUEPRINT&&e.contributorName!==n.CONTRIBUTOR_TYPES.ASAH_RECENT_SEARCH_KEYWORDS&&e.contributorName!==n.CONTRIBUTOR_TYPES.ASAH_TOP_SEARCH_KEYWORDS)))};var o=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r("./parse_json_string")),n=r("./types/contributorTypes")}));

Liferay.Loader.define("portal-search-web@6.0.113/js/components/SearchBar",["module","exports","require","@frontend-taglib-clay$clayui/autocomplete","@frontend-taglib-clay$clayui/button","@frontend-taglib-clay$clayui/drop-down","@frontend-taglib-clay$clayui/form","@frontend-taglib-clay$clayui/icon","@frontend-taglib-clay$clayui/loading-indicator","liferay!frontend-js-react-web$classnames","frontend-js-web","liferay!frontend-js-react-web$react","../hooks/useDebounceCallback","../utils/clean_suggestions_contributor_configuration"],(function(e,t,a){window;{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function SearchBar({destinationFriendlyURL:e,emptySearchEnabled:t,isDXP:a=!0,isSearchExperiencesSupported:g=!0,keywords:m="",keywordsParameterName:y="q",letUserChooseScope:h=!1,paginationStartParameterName:b,scopeParameterName:L,scopeParameterStringCurrentSite:E,scopeParameterStringEverything:C,searchURL:v,selectedEverythingSearchScope:w=!1,suggestionsContributorConfiguration:S="[]",suggestionsDisplayThreshold:_="2",suggestionsURL:I="/o/portal-search-rest/v1.0/suggestions"}){const R=new URL("".concat(Liferay.ThemeDisplay.getPathContext()).concat(I),Liferay.ThemeDisplay.getPortalURL()),[k,D]=(0,d.useState)(!1),[P,N]=(0,d.useState)(""),[q,j]=(0,d.useState)(m),[$,O]=(0,d.useState)(!1),[T,G]=(0,d.useState)(w?C:E),[U,x]=(0,d.useState)([]),W=(0,d.useRef)(),M=(0,d.useRef)(),F=(0,d.useCallback)((()=>{const e=(0,p.default)(S,a,g).map((e=>{var t;return(null===(t=e.attributes)||void 0===t?void 0:t.characterThreshold)?parseInt(e.attributes.characterThreshold,10):parseInt(_,10)}));return Math.min(...e)}),[a,g,S,_]),A=(0,d.useCallback)((()=>JSON.stringify((0,p.default)(S,a,g))),[a,g,S]),_fetchSuggestions=(t,a)=>{(0,c.fetch)((0,c.addParams)({currentURL:window.location.href,destinationFriendlyURL:e.trim().length?e:"/search",groupId:Liferay.ThemeDisplay.getScopeGroupId(),keywordsParameterName:y,plid:Liferay.ThemeDisplay.getPlid(),scope:a,search:t},R.href),{body:A(),headers:new Headers({Accept:"application/json","Accept-Language":Liferay.ThemeDisplay.getBCP47LanguageId(),"Content-Type":"application/json"}),method:"POST"}).then((e=>e.json())).then((e=>{x((null==e?void 0:e.items)||[])})).catch((()=>{x([])})).finally((()=>{O(!1)}))},[B]=(0,f.default)(_fetchSuggestions,500),_handleKeyDown=e=>{"Enter"===e.key&&_handleSubmit(e)},_handleChangeScope=e=>{G(e.target.value)},_handleFocus=()=>{0===F()&&""===q&&(O(!0),_fetchSuggestions(q,T),D(!0))},_handleSubmit=e=>{if(e.preventDefault(),e.stopPropagation(),q.trim().length||t){const e=_updateQueryString(document.location.search);(0,c.navigate)(v+e)}},_handleValueChange=e=>{const{value:t}=e.target;j(t),t.trim().length>=F()?(t.trim()!==P&&(O(!0),B(t.trim(),T)),D(!0),N(t.trim())):(D(!1),N(""))},_updateQueryString=e=>{const a=new URLSearchParams(e);return(t||q)&&a.set(y,q.replace(/^\s+|\s+$/,"")),b&&a.delete(b),h&&a.set(L,T),a.delete("p_p_id"),a.delete("p_p_state"),a.delete("start"),"?"+a.toString()};return d.default.createElement(r.default,{className:"search-bar-suggestions"},d.default.createElement(i.ClayInput.Group,{ref:W},h?d.default.createElement(d.default.Fragment,null,d.default.createElement(i.ClayInput.GroupItem,{className:"search-bar-with-scope",prepend:!0},d.default.createElement(i.ClayInput.Group,null,d.default.createElement(r.default.Input,{"aria-label":'Buscar',autoComplete:"off",className:"input-group-inset input-group-inset-after","data-qa-id":"searchInput",name:y,onChange:_handleValueChange,onFocus:_handleFocus,onKeyDown:_handleKeyDown,placeholder:'Procurar\x2e\x2e\x2e',type:"text",value:q}),d.default.createElement(i.ClayInput.GroupInsetItem,{after:!0},d.default.createElement("span",{className:"c-mr-2 inline-item"},d.default.createElement(s.default,{className:(0,o.default)({invisible:!$}),small:!0}))))),d.default.createElement(i.ClayInput.GroupItem,{prepend:!0,shrink:!0},d.default.createElement(i.ClaySelect,{"aria-label":'Escopo',name:L,onChange:_handleChangeScope,title:'Escopo',value:T},d.default.createElement(i.ClaySelect.Option,{key:E,label:'Este\x20site',value:E}),d.default.createElement(i.ClaySelect.Option,{key:C,label:'Tudo',value:C}))),d.default.createElement(i.ClayInput.GroupItem,{append:!0,className:"c-mr-0",shrink:!0},d.default.createElement(n.default,{"aria-label":'Buscar',displayType:"secondary",onClick:_handleSubmit,type:"submit"},d.default.createElement(u.default,{symbol:"search"})))):d.default.createElement(d.default.Fragment,null,d.default.createElement(r.default.Input,{"aria-label":'Buscar',autoComplete:"off",className:"input-group-inset input-group-inset-after search-bar-keywords-input","data-qa-id":"searchInput",name:y,onChange:_handleValueChange,onFocus:_handleFocus,onKeyDown:_handleKeyDown,placeholder:'Procurar\x2e\x2e\x2e',title:'Buscar',type:"text",value:q}),$?d.default.createElement(r.default.LoadingIndicator,null):d.default.createElement(i.ClayInput.GroupInsetItem,{after:!0},d.default.createElement(n.default,{"aria-label":'Buscar',displayType:"unstyled",onClick:_handleSubmit,type:"submit"},d.default.createElement(u.default,{symbol:"search"}))))),d.default.createElement(l.default.Menu,{active:k&&!!U.length,alignElementRef:W,autoBestAlign:!1,className:"search-bar-suggestions-dropdown-menu",closeOnClickOutside:!0,onSetActive:D,ref:M,style:{width:W.current&&W.current.clientWidth+"px"}},U.map(((e,t)=>d.default.createElement(l.default.ItemList,{className:"search-bar-suggestions-results-list",key:t},d.default.createElement(l.default.Group,{header:e.displayGroupName},e.suggestions.map((({text:e,attributes:t={}},a)=>d.default.createElement(l.default.Item,{href:t.assetURL,key:a},d.default.createElement("div",{className:"suggestion-item-title"},e),t.assetSearchSummary&&d.default.createElement("div",{className:"suggestion-item-description"},d.default.createElement("div",{className:"text-truncate-inline"},d.default.createElement("div",{className:"text-truncate"},t.assetSearchSummary||"")))))))))),d.default.createElement(l.default.ItemList,null,d.default.createElement(l.default.Item,{className:"search-bar-suggestions-show-more",onClick:_handleSubmit},'Exibir\x20mais'))))};var r=_interopRequireDefault(a("@frontend-taglib-clay$clayui/autocomplete")),n=_interopRequireDefault(a("@frontend-taglib-clay$clayui/button")),l=_interopRequireDefault(a("@frontend-taglib-clay$clayui/drop-down")),i=a("@frontend-taglib-clay$clayui/form"),u=_interopRequireDefault(a("@frontend-taglib-clay$clayui/icon")),s=_interopRequireDefault(a("@frontend-taglib-clay$clayui/loading-indicator")),o=_interopRequireDefault(a("liferay!frontend-js-react-web$classnames")),c=a("frontend-js-web"),d=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var l=r?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(a,n,l):a[n]=e[n]}a.default=e,t&&t.set(e,a);return a}(a("liferay!frontend-js-react-web$react")),f=_interopRequireDefault(a("../hooks/useDebounceCallback")),p=_interopRequireDefault(a("../utils/clean_suggestions_contributor_configuration"));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return e},e}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}}}));

